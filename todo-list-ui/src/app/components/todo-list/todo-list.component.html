<app-spinner [loading]="loading()"></app-spinner>

<section class="todo">
  <h1>TODOs</h1>

  <div class="actions">
    <input matInput placeholder="Search..." [(ngModel)]="searchTerm" />
    <button mat-raised-button color="primary" (click)="openAddDialog()">Add TODO</button>
  </div>

  @if (filteredTodos.length) {
    <div class="list">
      <ul>
        @for (item of filteredTodos; track trackById($index, item)) {
          <span>{{ item.title }} at {{item.appointment}}</span>
          <button mat-icon-button color="primary" (click)="openEditDialog(item)">✎</button>
          <button mat-icon-button color="warn" (click)="confirmDelete(item)">✕</button>
        }
      </ul>
    </div>
  }
  @else {
    <ng-template #empty>
      <p class="empty">No TODOs yet. Add one above.</p>
    </ng-template>
  }

  @if (error()) {
    <p class="error">{{ error() }}</p>
  }
</section>
